# 实现新功能 Prompt

系统性地实现新功能，从需求分析到测试验证。

## 用途

指导 AI 完整地实现一个新功能，确保考虑所有关键方面。

## 使用场景

- 开发中等到大型新功能
- 需要完整实现方案
- 要求代码质量和可维护性
- 需要测试覆盖

## Prompt 模板

```
我需要实现一个新功能：{功能描述}

## 项目背景
- 技术栈：{技术栈，如 React + TypeScript + Node.js}
- 现有架构：{简述架构}
- 相关约束：{性能、安全、兼容性等要求}

## 功能需求
{详细描述功能需求，包括：
- 用户故事/使用场景
- 输入和输出
- 边界条件
- 性能要求}

请按照以下步骤实现：

### 1. 需求分析
- 分析功能需求，识别核心和边缘情况
- 列出需要实现的子功能
- 识别潜在风险和挑战

### 2. 设计方案
- 提出技术方案（数据结构、算法、架构）
- 设计 API 接口（如适用）
- 考虑扩展性和可维护性
- 评估性能影响

### 3. 实现代码
- 实现核心功能
- 处理边界情况和错误
- 添加必要的注释
- 遵循项目编码规范

### 4. 测试方案
- 设计测试用例（正常、边界、异常）
- 实现单元测试
- 考虑集成测试需求

### 5. 文档说明
- API 文档（如适用）
- 使用示例
- 注意事项

请提供完整的实现，包括代码、测试和文档。
```

## 变量说明

- `{功能描述}`: 简短的功能描述，如"用户登录功能"
- `{技术栈}`: 项目使用的技术，如"React + TypeScript"
- `{简述架构}`: 当前项目架构，如"前后端分离，RESTful API"
- `{详细描述}`: 具体的功能需求和用户场景

## 使用示例

### 示例 1：用户登录功能

**输入**：
```
我需要实现一个新功能：用户登录功能

## 项目背景
- 技术栈：React + TypeScript (前端) + Node.js + Express (后端)
- 现有架构：前后端分离，RESTful API
- 相关约束：需要支持 JWT 认证，密码加密存储

## 功能需求
用户可以通过邮箱和密码登录系统：
- 输入：邮箱地址、密码
- 验证：邮箱格式、密码强度
- 输出：登录成功返回 JWT token，失败返回错误信息
- 边界条件：密码错误次数限制（5次），账号锁定机制
- 性能要求：登录响应时间 < 500ms

[... 后续步骤按模板 ...]
```

**预期输出**：
AI 会提供完整的实现方案，包括：
1. 需求分析（识别子功能：邮箱验证、密码校验、token 生成等）
2. 设计方案（数据库 schema、API 设计、认证流程）
3. 完整代码（前端表单组件、后端 API、中间件等）
4. 测试用例（单元测试、集成测试）
5. 使用文档

### 示例 2：数据导出功能

**输入**：
```
我需要实现一个新功能：批量导出数据为 CSV

## 项目背景
- 技术栈：Python + FastAPI + pandas
- 现有架构：微服务架构，异步任务处理
- 相关约束：数据量可能很大（10万+行），需要分页处理

## 功能需求
管理员可以导出用户数据为 CSV 文件：
- 输入：筛选条件（日期范围、用户类型）
- 处理：从数据库读取数据，转换为 CSV 格式
- 输出：下载链接或文件流
- 边界条件：大数据量处理，超时控制
- 性能要求：10万条数据在 30 秒内完成

[... 后续步骤按模板 ...]
```

## 变体

### 变体 1：快速原型（简化版）

```
我需要快速实现一个原型：{功能描述}

技术栈：{技术栈}

需求：
{简要描述核心功能}

请提供：
1. 最简实现（MVP）
2. 核心代码
3. 基本测试

暂不考虑：
- 边界情况处理
- 完整错误处理
- 性能优化
```

### 变体 2：增强现有功能

```
我需要增强现有功能：{功能名称}

当前实现：
{当前代码或描述}

增强需求：
{新增的功能点}

请：
1. 分析当前代码
2. 设计增强方案（保持向后兼容）
3. 实现新功能
4. 更新测试
5. 迁移指南（如需要）
```

### 变体 3：API 功能实现

```
我需要实现一个 API 端点：{端点描述}

API 规范：
- 路径：{路径}
- 方法：{HTTP 方法}
- 请求参数：{参数说明}
- 响应格式：{响应格式}

请提供：
1. API 实现代码
2. 输入验证
3. 错误处理
4. API 文档
5. 测试用例（包含各种场景）
```

## 注意事项

1. **充分的上下文**：提供足够的项目背景和技术栈信息
2. **明确需求**：清楚描述输入、输出、边界条件
3. **性能要求**：说明性能预期，特别是数据量大的情况
4. **安全考虑**：涉及用户数据或敏感操作时强调安全性
5. **现有规范**：提及项目的编码规范和最佳实践
6. **分步实施**：对于大功能，可以分多次实现
7. **测试先行**：强调测试的重要性

## 提示技巧

### 提供现有代码
```
"参考现有的 UserService 实现模式：
{粘贴相关代码}
请保持一致的代码风格"
```

### 引用项目规范
```
"遵循项目规范：
@.cursor/rules/typescript-standards.mdc
@.cursor/rules/api-conventions.mdc"
```

### 分阶段实现
```
"第一阶段：实现核心功能（不考虑边界情况）
我们先把基本流程跑通，后续再完善"
```

## 后续步骤

实现完成后：

1. **代码审查**：使用 `@prompts/coding/frequently-used/code-review.md`
2. **补充测试**：使用 `@prompts/coding/frequently-used/test-generation.md`
3. **代码优化**：使用 `@prompts/refactoring/frequently-used/clean-code.md`
4. **编写文档**：使用 `@prompts/documentation/frequently-used/api-docs.md`

## 相关资源

- [代码审查 Prompt](code-review.md)
- [测试生成 Prompt](test-generation.md)
- [功能开发工作流](../../../workflows/development/frequently-used/feature-development.md)
- [API 文档 Prompt](../../documentation/frequently-used/api-docs.md)

---

**立即使用**: 复制模板，填写具体信息，在 Cursor 中使用！
