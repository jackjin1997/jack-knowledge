# 面试问题梳理

基于你的简历，整理了面试官可能问到的问题，按类别和难度分层。

---

## 一、AI Agent / LangChain / LangGraph（重点）

### 基础问题

1. **介绍一下你的 AI Agent 项目？**
   - 项目背景、目标、你的角色
   - 为什么选择多 Agent 架构而不是单 Agent？

2. **什么是 LangChain？LangGraph 和 LangChain 有什么区别？**
   - LangChain：链式调用、Tool、Agent、Memory
   - LangGraph：状态图、节点、边、Checkpoint

3. **为什么选择 Supervisor 模式？还有哪些多 Agent 模式？**
   - Supervisor vs Hierarchical vs Peer-to-Peer
   - 各自的优缺点和适用场景

4. **你是如何设计 6 个 Agent 的分工的？**
   - Hotel、Flight、Restaurant、Attraction、Itinerary、Currency
   - 为什么这样拆分？有没有考虑过其他拆分方式？

### 深入问题

5. **详细讲一下三阶段行程规划流程（Overview → Detail → Review）？**
   - 每个阶段做什么？
   - 为什么要分三阶段？一步到位不行吗？
   - 如何处理阶段间的数据传递？

6. **POI 池和交通池是怎么设计的？为什么需要这个抽象？**
   - 数据结构是什么样的？
   - 如何处理去重和排序？
   - Agent 之间如何共享这些数据？

7. **LangGraph 的状态管理是怎么实现的？**
   ```python
   class State(TypedDict):
       messages: Annotated[list[AnyMessage], add_messages]
       poi_pool: Annotated[PoiPool, add_poi_pool]
   ```
   - `Annotated` 和 `add_messages` 是干什么的？
   - Checkpoint 机制是如何工作的？
   - 如何实现对话回溯？

8. **如何处理长对话的上下文限制？**
   - 对话摘要（Conversation Summary）是怎么做的？
   - 什么时候触发摘要？
   - 摘要会丢失信息吗？怎么平衡？

9. **流式响应是怎么实现的？为什么用 SSE 而不是 WebSocket？**
   - SSE vs WebSocket 的区别
   - 如何实现首字节 <3s？
   - 流式传输中如何处理错误？

10. **Agent 调用失败怎么办？有什么降级策略？**
    - 超时处理
    - 重试机制
    - 降级返回

### 高级问题

11. **如何评估 Agent 系统的效果？85% 准确率是怎么算的？**
    - 评估指标有哪些？
    - 如何收集反馈？
    - 如何持续优化？

12. **LangSmith 你们是怎么用的？解决了什么问题？**
    - Tracing
    - Prompt 版本管理
    - 评估和测试

13. **如果让你重新设计这个系统，你会做什么改进？**
    - 架构层面
    - 技术选型
    - 产品体验

14. **多 Agent 系统的 Token 成本怎么控制？**
    - 每次请求大概多少 Token？
    - 有什么优化策略？

15. **你对 MCP（Model Context Protocol）怎么看？有没有用过？**
    - 和传统 Tool Calling 的区别
    - 适用场景

---

## 二、微服务框架设计

### 基础问题

1. **为什么要自己造轮子？NestJS 不够用吗？**
   - NestJS 的问题：配置繁琐、学习成本高
   - 你的框架解决了什么问题？
   - 有没有考虑过用现有框架改造？

2. **插件化架构是怎么设计的？**
   - Factory 模式
   - Plugin 接口定义
   - 生命周期钩子

3. **为什么用 Hono 而不是 Express/Fastify/Koa？**
   - Hono 的优势
   - 性能对比
   - 生态考虑

### 深入问题

4. **洋葱圈优先级模型是怎么实现的？**
   ```
   SYSTEM(50) → SECURITY(100) → LOGGING(200) → BUSINESS(300) → PERFORMANCE(400) → ROUTE(1000)
   ```
   - 为什么这样设计优先级？
   - `handler.wrap()` 是怎么工作的？
   - 如果两个插件优先级相同怎么办？

5. **自动客户端生成是怎么做的？减少 80% 是怎么算的？**
   - 代码生成的原理
   - 类型安全是怎么保证的？
   - 支持流式传输的客户端怎么生成？

6. **分布式定时任务是怎么设计的？为什么用 etcd？**
   - 主节点选举机制
   - FIXED_RATE vs FIXED_DELAY
   - 如果 etcd 挂了怎么办？

7. **优雅停机是怎么实现的？**
   - 信号监听
   - 请求追踪
   - 超时保护

8. **Zod 运行时验证和 TypeScript 编译时类型是怎么结合的？**
   - 类型推断
   - 错误处理
   - 性能影响

### 高级问题

9. **框架代码量 <5000 行，你是怎么做到轻量的？**
   - 设计原则
   - 取舍决策
   - 哪些功能选择不做？

10. **如果框架要开源，你觉得还差什么？**
    - 文档
    - 测试
    - 社区建设

---

## 三、低代码 / 工作流平台

### 基础问题

1. **低代码平台和 Dify/N8n 有什么区别？**
   - 功能差异
   - 技术实现差异
   - 目标用户差异

2. **双层工作流模型是怎么设计的？**
   - AtomFlow vs CombinedFlow
   - 为什么要分两层？

3. **可视化画布编辑器是怎么实现的？**
   - 用的什么库？
   - 拖拽、连线怎么做的？
   - 数据结构是什么样的？

### 深入问题

4. **节点连接方式（matrixBelow/matrixRight/matrixKey）是怎么设计的？**
   - 为什么用矩阵模型？
   - 并行执行怎么实现？
   - 嵌套流程怎么处理？

5. **工作流执行引擎是怎么设计的？**
   - ProcessService 的核心逻辑
   - 断点续执行怎么做？
   - 运行时状态存在哪里？

6. **多租户权限是怎么实现的？**
   - Channel 隔离
   - RBAC 细节
   - 数据隔离还是逻辑隔离？

7. **AI 智能匹配是怎么做的？**
   - 自然语言匹配工作流
   - 用了什么模型？
   - 准确率怎么样？

8. **日均 10000+ 流程执行，有遇到什么性能问题吗？**
   - 瓶颈在哪？
   - 怎么优化的？
   - 监控怎么做的？

### 高级问题

9. **银行客户对安全性有什么特殊要求？你们怎么满足的？**
   - 数据安全
   - 审计日志
   - 权限控制

10. **工作流版本控制是怎么做的？**
    - 版本存储
    - 回滚机制
    - 在线工作流怎么升级？

---

## 四、开源贡献

### 问题

1. **你给 LangChain 贡献了什么？**
   - 具体的 PR/Issue
   - 解决了什么问题？
   - 过程中学到了什么？

2. **给 Antigravity Awesome Skills 贡献的 Skill 是什么？**
   - 做了什么功能？
   - 为什么要贡献这个？

3. **Cosmos SDK 你贡献了什么？**
   - 区块链相关的背景
   - 具体贡献内容

4. **开源贡献给你带来了什么？**
   - 技术成长
   - 社区连接
   - 对框架的理解

5. **如何平衡工作和开源贡献？**

---

## 五、技术领导力 / 团队管理

### 问题

1. **你是怎么从开发工程师成长为技术负责人的？**
   - 关键转折点
   - 能力提升

2. **带领 5 人团队，你的管理风格是什么？**
   - 任务分配
   - 代码评审
   - 技术培训

3. **团队里有意见分歧怎么处理？**
   - 技术方案分歧
   - 优先级分歧

4. **你是怎么做技术选型的？**
   - 决策过程
   - 考虑因素
   - 如何说服团队

5. **有没有遇到过项目延期？怎么处理的？**

6. **如何培养团队成员？**

---

## 六、系统设计（可能的白板题）

### 问题

1. **设计一个多 Agent 聊天系统**
   - 如何路由到不同 Agent？
   - 状态管理怎么做？
   - 如何保证一致性？

2. **设计一个工作流执行引擎**
   - 数据结构
   - 执行顺序
   - 错误处理

3. **设计一个插件系统**
   - 插件接口
   - 生命周期
   - 依赖管理

4. **设计一个 LLM 调用的限流系统**
   - 令牌桶 vs 漏桶
   - 分布式限流
   - 优先级队列

---

## 七、法翔物流经历相关

### 问题

1. **SQL 优化从 O(n²) 到 10% 是怎么做的？**
   - TypeORM save 的问题
   - 你的解决方案
   - 怎么测量的？

2. **对账系统重构具体做了什么？**
   - 原来的问题
   - Lambda Serverless 方案
   - 效果提升

3. **定价表拆表设计是怎么想到的？**
   - 原来的设计问题
   - 新设计的思路
   - Redis 缓存策略

4. **从 0 到 1 开发 Shopify 小程序，最大的挑战是什么？**
   - 技术挑战
   - 业务挑战
   - 你怎么克服的？

5. **在法企工作和国内公司有什么不同？**
   - 工作方式
   - 技术栈
   - 沟通协作

---

## 八、行为面试题（STAR 法则）

### 问题

1. **描述一个你遇到的最大技术挑战，你是怎么解决的？**
   - 建议用：多 Agent 状态管理 / 微服务框架设计

2. **有没有一次你的方案被否定了？你怎么处理的？**

3. **描述一次你带领团队完成紧急项目的经历**

4. **有没有一次你主动发现并解决了一个别人没注意到的问题？**
   - 建议用：SQL O(n²) 优化

5. **描述一次你和产品/业务有分歧的经历**

6. **你是怎么保持技术学习的？**
   - 开源贡献
   - 社区参与
   - 技术实践

---

## 九、反问环节（你问面试官）

### 建议问题

1. **团队目前在 AI 应用方面有什么规划？**
2. **团队用的 AI 技术栈是什么？有用 LangChain 吗？**
3. **这个岗位的主要挑战是什么？**
4. **团队的技术氛围怎么样？有开源贡献文化吗？**
5. **公司对 AI Agent 方向怎么看？**

---

## 十、准备建议

### 核心故事线（建议准备 3-5 个详细案例）

1. **AI Agent 系统**：多 Agent 协作、状态管理、性能优化
2. **微服务框架**：从零设计、插件架构、洋葱圈模型
3. **低代码平台**：工作流引擎、可视化、多租户
4. **性能优化**：SQL O(n²) → 10%
5. **开源贡献**：LangChain PR 的具体内容

### 技术深度准备

1. **LangChain/LangGraph 源码**：至少看过核心模块
2. **状态管理**：StateGraph、Checkpoint 机制
3. **流式传输**：SSE、AsyncIterator
4. **分布式**：etcd 选举、Redis 分布式锁

### 数据准备

- 85% 准确率怎么算的？
- 90% 满意度数据来源？
- 10000+ 日均执行量
- 开发周期从 2 周到 3 天
- 框架 <5000 行代码

---

## 十一、可能的追问方向

### 从 AI Agent 追问

```
AI Agent → LangGraph 状态管理 → Checkpoint 机制 → 数据持久化 → PostgreSQL
                                                              ↓
AI Agent → Token 成本 → 对话摘要 → 摘要算法 → 信息损失评估
                                                              ↓
AI Agent → 错误处理 → 降级策略 → 用户体验 → 产品设计
```

### 从微服务框架追问

```
插件架构 → 生命周期 → 依赖注入 → 类型推断 → TypeScript 高级类型
                                                              ↓
洋葱圈模型 → 中间件 → AOP → 日志/监控 → 可观测性
                                                              ↓
分布式调度 → etcd → 一致性算法 → Raft → 分布式系统理论
```

### 从低代码追问

```
工作流引擎 → 执行模型 → 状态机 → 并行/串行 → 分布式事务
                                                              ↓
可视化 → 数据结构 → 图论 → 拓扑排序 → DAG
                                                              ↓
多租户 → 数据隔离 → 安全性 → 审计 → 合规
```
